<div *ngIf="institution">
    <span id="institution-name-title">Institution Information: </span>
    <span id="institution-name">{{institution.name}}</span>
    <button id="institution-details-button" (click)="isInstitutionPanelOpen = !isInstitutionPanelOpen">
        <i class="material-icons">radio_button_checked</i>
    </button>
    <div *ngIf="isInstitutionPanelOpen">
        <div class="card card-w-title institution-details-card">
            <div class="card card-w-title">
                <h1>{{institution.name}}</h1>
                <h2>{{institution.addressline1}}</h2>
            </div>
        </div>
    </div>
    <div id="enrolled-students-table" class="table-container">
        <span class="table-title">Students Enrolled</span>
        <table class="student-table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Name</th>
                    <th>Class</th>
                    <th>Teacher</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let student of enrolledStudents; let idx = index;">
                    <td >{{idx+1}}</td>
                    <td >
                        <span class="student-name"> {{student.name}} </span>
                        <!-- TODO Fails when routed-->
                        <button id="student-submenu-button-{{idx}}" class="student-submenu-button">
                            <i class="material-icons">arrow_drop_down</i>
                        </button>
                        <ul attr.for="student-submenu-button-{{idx}}">
                            <button class="submenu " (click)="toggleModal('ParentChildrenModal_Manage')">Manage</button>
                            <button class="submenu " (click)="toggleModal('ParentChildrenModal_PayTuitionFees')">Pay Tuition Fees</button>
                            <button class="submenu " (click)="toggleModal('ParentChildrenModal_Unenroll')">Un-enroll</button>
                        </ul>
                    </td>
                    <td>{{student.class}}</td>
                    <td>{{student.teacher}}</td>
                </tr>
            </tbody>
        </table>
        <button class="action-buttons" md-raised-button color="primary" (click)="toggleModal('ParentChildrenModal_EnrollStudent')">Enroll Student</button>
    </div>

    <div id="billing-history-table" class="table-container">
        <span class="table-title">Billing History</span>
        <table class="student-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Institution</th>
                    <th>Amount</th>
                    <th>Invoice</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let row of billingHistory">
                    <td>{{row.date}}</td>
                    <td>{{row.institution}}</td>
                    <td>{{row.amount}}</td>
                    <td style="width: 100px;">
                        <a class="invoice-link" href={{row.invoiceLink}}>
                            <i class="material-icons">invoice-link-icon</i>
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>