<delete-user #deleteUserManager></delete-user>
<manage-user-profile #userProfileManager></manage-user-profile>
<reset-password #resetPasswordManager></reset-password>
<invite-friends #invitationManager></invite-friends>
<add-payment-type #addPaymentManager></add-payment-type>
<delete-payment-type #deletePaymentManager></delete-payment-type>
<resend-invitation #resendPaymentManager></resend-invitation>
<div id="profile-administration-table" class="table-container">
    <span class="table-title">Profile Administration</span>
    <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp student-table">
        <thead>
            <tr>
                <th class="table-heading mdl-data-table__cell--non-numeric">Name</th>
                <th class="table-heading mdl-data-table__cell--non-numeric">Relationship</th>
                <th class="table-heading mdl-data-table__cell--non-numeric">Role</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let row of profileInfo; let idx = index">
                <td class="mdl-data-table__cell--non-numeric">
                    <span>{{row.name}}</span>
                    <!-- TODO Fails when routed-->
                    <button md-icon-button id="user-submenu-button-{{idx}}" class="user-submenu-button">
                        <md-icon>arrow_drop_down</md-icon>
                    </button>
                    <ul class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" attr.for="user-submenu-button-{{idx}}">
                        <button class="submenu mdl-menu__item" (click)="userProfileManager.toggleView()">Manage</button>
                        <button class="submenu mdl-menu__item mdl-menu__item--full-bleed-divider" (click)="resetPasswordManager.toggleView()">Reset Password</button>
                        <button class="submenu mdl-menu__item negative-color" (click)="deleteUserManager.toggleView()">Delete User</button>
                    </ul>
                </td>
                <td class="mdl-data-table__cell--non-numeric">{{row.relationship}}</td>
                <td class="mdl-data-table__cell--non-numeric" *ngIf="row.status.isAccepted">{{row.status.role}}</td>
                <td class="mdl-data-table__cell--non-numeric" *ngIf="!row.status.isAccepted">
                    <a (click)="resendPaymentManager.toggleView()">Send Invitation</a>
                </td>
            </tr>
        </tbody>
    </table>
    <button class="action-buttons" md-raised-button color="primary" (click)="invitationManager.toggleView()">Invite Friends</button>
</div>

<div id="billing-adminitstration-table" class="table-container">
    <span class="table-title">Billing Administration</span>
    <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp student-table">
        <thead>
            <tr>
                <th class="table-heading mdl-data-table__cell--non-numeric">Type</th>
                <th class="table-heading mdl-data-table__cell--non-numeric">Account Number</th>
                <th class="table-heading mdl-data-table__cell--non-numeric">Primary</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let row of billingInfo; let idx = index">
                <td class="mdl-data-table__cell--non-numeric">
                    <span>{{row.type}}</span>
                    <!-- TODO Fails when routed-->
                    <button md-icon-button id="billingInfo-submenu-button-{{idx}}" class="billingInfo-submenu-button">
                        <md-icon>arrow_drop_down</md-icon>
                    </button>
                    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" attr.for="billingInfo-submenu-button-{{idx}}">
                        <button class="submenu mdl-menu__item mdl-menu__item--full-bleed-divider" (click)="addPaymentManager.toggleView()">Manage</button>
                        <button class="submenu mdl-menu__item negative-color" (click)="deletePaymentManager.toggleView()">Delete Payment Type</button>
                    </ul>
                </td>
                <td class="mdl-data-table__cell--non-numeric">{{row.accountNumber}}</td>
                <td class="mdl-data-table__cell--non-numeric" *ngIf="row.status.isExpired">Expired!</td>
                <td class="mdl-data-table__cell--non-numeric" *ngIf="!row.status.isExpired">
                    <md-slide-toggle class="slide-toggle" color="primary" [checked]="row.status.isPrimary"></md-slide-toggle>
                </td>
            </tr>
        </tbody>
    </table>
    <button class="action-buttons" md-raised-button color="primary" (click)="addPaymentManager.toggleView()">Add Payment Type</button>
</div>